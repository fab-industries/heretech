pico-8 cartridge // http://www.pico-8.com
version 43
__lua__
function _init()
 t=0
 p_ani={1,2,3,4}
 glitch_t=0
 glitch_newt=true
 wsly=-400
 _upd=update_game
 _drw=draw_game
 startgame()
end

function _update()
 t+=1
 move_wsl()
 _upd()
end

function _draw()
 _drw()
 glitch()
 draw_wsl()
 scanlines()
 vignette()
end

function startgame()
 p_x=4
 p_y=3
end
-->8
--update

function update_game()
 if btnp(⬅️) then
  p_x-=1
 end
 if btnp(➡️) then
  p_x+=1
 end
 if btnp(⬆️) then
  p_y-=1
 end
 if btnp(⬇️) then
  p_y+=1
 end
end

function update_gameover()

end
-->8
--draw

function draw_game()
 cls(0)
 map()
 drawspr(getframe(p_ani),p_x*8,p_y*8)
end

function draw_gameover()

end
-->8
--tools

function getframe(ani)
 return ani[flr(t/8)%#ani+1]
end

function drawspr(_spr,_x,_y)
 palt(0,false)
 spr(_spr,_x,_y)
 palt()
end

function glitch()
 
 if glitch_newt==true then
 
  glitch_t=flr(rnd(500))+90
  glitch_newt=false
  
 end
 
 if t%glitch_t==0 then
  
  glitch_newt=true
  
  local lines=lines or 64
  for i=1,lines do
   
   row=flr(rnd(128))
   row2=flr(rnd(127))
   if (row2>=row) row2+=1
  
   // copy a row from the
   // screen into temp memory
   memcpy(0x4300, 0x6000+64*row, 64)
		
   //copy another row from the
   // screen to our original row
   memcpy(0x6000+64*row, 0x6000+64*row2, 64)
		       
   //copy the temp row into row2's
   //original slot
   memcpy(0x6000+64*row2, 0x4300,64)
  
  end
 
 end
 
end

function scanlines()
 
 for i=0,15 do
  pal(i,i+128,2)
 end	
 -- uses alternate palette
 poke(0x5f5f,0x10)
 -- scanline mask
 memset(0x5f70,0xaa,16)

end

function draw_wsl()
 
 line(0,wsly,127,wsly,3)

end

function move_wsl()

 if wsly>-450 then
  if t%1==0 then
   wsly-=3
  end
 else
  wsly=126
 end

end

function vignette()

 spr(76,-7,-6,3,3)
 spr(76,111,-6,3,3,true)
 spr(76,-7,111,3,3,false,true)
 spr(76,111,111,3,3,true,true)
 
end

__gfx__
00000000000000000009990000000000000999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000999000099000000099900009900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700009900000099990000990000009999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000009999000666660000999900066666600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000066666006066990606666600066699000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700606699060066990000669900006699000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006699000006006006069900000606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000006000600060000000000600000606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbbbbb03333333099999990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000003000003090000090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000bbbbbbb030b0003090a00090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000300b0030900a0090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000003333333030b0003090a00090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
03303030000000003000003090000090000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000333333303333333099999990000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005050505050505050500000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000505050505050000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005050505050000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000505050000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005050500000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000505000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005050000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005050000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000666999999999999449fffffffffffffffffff000000000000000000000000
00090000000000000000000000000000000000000000000000000000000990000006699999999999994449ffffffffffffffffff000000000000000000000000
000990000000000000000000000000000000000000000000000000000099900000066999999999999944449fffffffffffffffff000000000000000000000000
0009990000000000000000000000000000000000000000000000000009996000000699999999999999444449ffffffffffffffff000000000000000000000000
00069999000000000000000000000000000000000000000000000000999960000006999999999999994444449fffffffffffffff000000000000000000000000
000699999000000000000000000000000000000000000000000000999996600000066999999999999994444449fffffffffffff9000000000000000000000000
0006699999900000000000000000000000000000000000000000099999966000000666699999999999999999999fffffffffff99000000000000000000000000
00066999999900000000000000000000000000000000000000099999996660000066666669999999999999999999fffffffff999000000000000000000000000
000666999999990000000000000000000000000000000000009999999966600000666666669999999999999999999fffffff9999999999999999999666666000
0006669999999990000000000000000000000000000000009999999996666000006666666666999999999999999999fffff99999999999999999996666666600
00066669999999999000000000000000000000000000000999999999966660000666666666666999999999999999999fff999999999999999999666666666600
000666699999999999900000000000000000000000000999999999999666600006666666666666699999999999999999f9999999999999999996666666666600
00066669999999999999000000000000000000000009999999999999666660000666666666666666999999999999999999999999999999999666666666666660
00066666999999999999990000000000000000000099999999999999666660000666666666666666669999999999999959999999999999966666666666666660
00066666999999999999999000000000000000009999999999999996666660006666666666666666666999999999999555999999999999666666666666666660
00066666699999999999999990000000000000099999999999999996666660000000666666666666666669999999995555599999999966666666666666666666
00066666699999999999998888888000000888888999999999999966666660000000000066666666666666999999995555599999999666666666666666666660
00066666669999999999888888888888888888888889999999999966666660000000000000066666666666669999955555559999966666666666666666666000
00066666669999999988888888888999998888888888899999999666666660000000000000000776666666666699555555555999666666666666666600000000
00066666669999998888888999999999999999988888888999999666666660000000000000000007777666666666555555555666666666666660000000000000
00066666666999888899999999999999999999999999988888999666666660000000000000000000777777666666655555556666666666777000000000000000
00066666666699999999999999999999999999999999999999996666666660000000000000000000007777777766665555566666677777770000000000000000
000666666669ffffffffffffffffffffffffffffffffffffffff6666666660000000000000000000000777777777777555777777777777000000000000000000
0006666666699fffffffffffffffffffffffffffffffffffffff9666666660000000000000000000000007777777777777777777777770000000000000000000
00066666669999fffffffffffffffffffffffffffffffffffff99966666660000000000000000000000000777777777777777777777000000000000000000000
000666666699999fffffffffffffffffffffffffffffffffff999966666660000000000000000000000000007777777777777777700000000000000000000000
0006666669999999fffffffffffffffffffffffffffffffff9999996666660000000000000000000000000000077777777777777000000000000000000000000
00066666699999999fffffffffffffffffffffffffffffff99999996666660000000000000000000000000000007777777777700000000000000000000000000
000666669999999999fffffffffffffffffffffffffffff999999999666660000000000000000000000000000000077777770000000000000000000000000000
0006666699999999999fffffffffffffffffffffffffff9999999999666660000000000000000000000000000000000777000000000000000000000000000000
00066669999999999499fffffffffffffffffffffffff99499999999966660000000000000000000000000000000000000000000000000000000000000000000
00066699999999999449fffffffffffffffffffffffff94499999999966660000000000000000000000000000000000000000000000000000000000000000000
00bb000000000bb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bb000000000000000
bbbb0000000bbbb0000000000000000000000000000000000000000000000bbbbbbbbbbbbbb0000000000000000000000000000000000bbbb000000000000000
bbbb0000000bbbb000000000000000000000000000000000000000000000bbbbbbbbbbbbbbb0000000000000000000000000000000000bbbb000000000000000
bbbb0000000bbbb000000000000000000000000000000000000000000000bbbbbbbbbbbbbbb0000000000000000000000000000000000bbbb000000000000000
bbbb0000000bbbb000000000000000000000000000000000000000000000bbbbbbbbbbbbbb00000000000000000000000000000000000bbbb000000000000000
bbbb0000000bbbb000000000000000000000000000000000000000000000000000bbbb000000000000000000000000000000000000000bbbb000000000000000
bbbb0000000bbbb000000bbbbbbbbb00000000bbbbbbb0000bbbbbbbbb00000000bbbb0000000bbbbbbbbb00000000bbbbbbbbb000000bbbbbbbbbbb00000000
bbbb0000000bbbb00000bbbbbbbbbbb000000bbbbbbbb000bbbbbbbbbbb0000000bbbb000000bbbbbbbbbbb000000bbbbbbbbbbb00000bbbbbbbbbbbb0000000
33330000000333300003333333333333000033333333000333333333333300000033330000033333333333330000333333333333300003333333333333000000
bbbb0000000bbbb0000bbbbbbbbbbbbb0000bbbbbbbb000bbbbbbbbbbbbb000000bbbb00000bbbbbbbbbbbbb0000bbbbbbbbbbbbb0000bbbbbbbbbbbbb000000
bbbbbbbbbbbbbbb0000bbbb00000bbbb0000bbbb0000000bbbb00000bbbb000000bbbb00000bbbb00000bbbb0000bbbb00000bbbb0000bbbb00000bbbb000000
33333333333333300003333000033333000033330000000333300003333300000033330000033330000333330000333300000333300003333000003333000000
bbbbbbbbbbbbbbb0000bbbb000bbbbbb0000bbbb0000000bbbb000bbbbbb000000bbbb00000bbbb000bbbbbb0000bbbb00000bbb00000bbbb00000bbbb000000
33333333333333300003333033333330000033330000000333303333333000000033330000033330333333300000333300000000000003333000003333000000
33330000000333300003333333333000000033330000000333333333300000000033330000033333333330000000333300000000000003333000003333000000
33330000000333300003333333330000000033330000000333333333000000000033330000033333333300000000333300000000000003333000003333000000
33330000000333300003333333300333000033330000000333333330033300000033330000033333333003330000333300000033300003333000003333000000
33330000000333300003333330003333000033330000000333333000333300000033330000033333300033330000333300000333300003333000003333000000
33330000000333300003333300003333000033330000000333330000333300000033330000033333000033330000333300000333300003333000003333000000
33330000000333300003333333333333000033330000000333333333333300000033330000033333333333330000333333333333300003333000003333000000
33330000000333300003333333333333000033330000000333333333333300000033330000033333333333330000333333333333300003333000003333000000
33330000000333300000333333333330000033330000000033333333333000000033330000003333333333300000033333333333000003333000003333000000
33330000000333300000033333333300000033330000000003333333330000000033330000000333333333000000003333333330000003333000003333000000
33000000000330000000000000000000000033000000000000000000000000000033000000000000000000000000000000000000000003300000003300000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000033000000
00333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333000000
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333000000
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333300000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000003131313131313131000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000003132303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000003130303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000003130303030303031000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000003130303030303331000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000003131313131313131000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
